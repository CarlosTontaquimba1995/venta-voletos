<div class="seat-selection-container">
    <h2>Selecciona tu tipo de localidad</h2>
    <div class="seat-cards">
        <mat-card *ngFor="let seatType of seatTypes" [class.selected]="selectedSeatType?.id === seatType.id"
            (click)="onSeatSelect(seatType)" [class.unavailable]="!seatType.available"
            [matTooltip]="!seatType.available ? 'Agotado' : ''" matTooltipPosition="above"
            [class.best-value]="seatType.id === 'preferente'">

            <div class="card-badge" *ngIf="seatType.id === 'preferente'">Mejor relación calidad-precio</div>

            <mat-card-header>
                <mat-card-title>
                    <mat-icon *ngIf="seatType.id === 'vip'" class="card-icon">star</mat-icon>
                    <mat-icon *ngIf="seatType.id === 'preferente'" class="card-icon">favorite</mat-icon>
                    <mat-icon *ngIf="seatType.id === 'general'" class="card-icon">event_seat</mat-icon>
                    {{seatType.name}}
                </mat-card-title>
                <mat-card-subtitle>
                    <span class="price">${{seatType.price}} USD</span>
                    <span class="taxes">+ impuestos</span>
                </mat-card-subtitle>
            </mat-card-header>

            <div *ngIf="selectedSeatType?.id === seatType.id" class="quantity-controls">
                <div class="quantity-label">Cantidad:</div>
                <div class="quantity-selector">
                    <button mat-icon-button (click)="decrementQuantity()" [disabled]="quantity <= 1">
                        <span class="quantity-btn">-</span>
                    </button>
                    <span class="quantity">{{quantity}}</span>
                    <button mat-icon-button (click)="incrementQuantity()" [disabled]="quantity >= 10">
                        <span class="quantity-btn">+</span>
                    </button>
                </div>
            </div>
        </mat-card>
    </div>

    <div *ngIf="selectedSeatType" class="selection-summary" @fadeIn>
        <h3>Resumen de tu selección</h3>
        <div class="selection-details">
            <div class="detail-row">
                <span class="detail-label">{{quantity}} x {{selectedSeatType.name}}</span>
                <span class="detail-value">${{selectedSeatType.price * quantity}} USD</span>
            </div>
            <div class="detail-row total">
                <span class="detail-label">Total a pagar</span>
                <span class="detail-value">${{getTotalPrice()}} USD</span>
            </div>
        </div>
    </div>
    </div>